@model Maps.Entities.DetailsMapViewModel
@{
    ViewBag.Title = "Details";
}

@if (!Html.ViewData.ModelState.IsValid)
{
    <div class="row">
        <div class="col card">
            @Html.ValidationSummary(false, "", new { @class = "text-danger" })
        </div>
    </div>
}
<div class="row h-100">
    <div class="col-3 p-0" id="sidebar">
        @Html.Partial("Sidebar", Model)
    </div>
    <div class="col border p-0 h-100">
        <nav class="bg-white">
            <ul class="nav nav-tabs" id="nav-tab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link" id="nav-map-tab" data-toggle="tab" href="#nav-map" role="tab" aria-controls="nav-map" aria-selected="true">Map</a>
                </li>
                <li class="nav-item dropdown">
                    <a id="layersDataDropdownLink" onclick="layersDataDropdownLink()" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Data tables</a>
                    <div id="layersDataDropdown" class="dropdown-menu" aria-labelledby="layerListDropdown">

                        @Html.Partial("../Layer/LayersDataDropdown", Model.Layers)
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="nav-chart-tab" data-toggle="tab" href="#nav-chart" role="tab" aria-controls="nav-chart" aria-selected="false">Chart</a>
                </li>
            </ul>
        </nav>
        <div class="tab-content" id="nav-tabContent">
            <div class="tab-pane fade show" id="nav-map" role="tabpanel" aria-labelledby="nav-map-tab">MAPA</div>
            <div class="tab-pane fade" id="nav-table" role="tabpanel" aria-labelledby="nav-table-tab"></div>
            <div class="tab-pane fade" id="nav-chart" role="tabpanel" aria-labelledby="nav-chart-tab">GRAFIKON</div>
        </div>
    </div>
</div>

<script>
    function completeShowTable() {
        $('#nav-table').tab('show')
    }

    function layersDataDropdownLink() {
        var request = $.ajax({
            type: "get",
            url: "../../Layer/LayersDataDropdown",
            data: {
                mapId: "@Model.Id"
            }
        });
        request.done(function (msg) {
            $("#layersDataDropdown").html(msg);
        });
    }
</script>


